\hypertarget{Generator_8cs_source}{}\doxysection{Generator.\+cs}
\label{Generator_8cs_source}\index{Vuji/Assets/Scripts/Game/Map/Generator.cs@{Vuji/Assets/Scripts/Game/Map/Generator.cs}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00001}00001 \textcolor{keyword}{using }System.Collections;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00002}00002 \textcolor{keyword}{using }System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00003}00003 \textcolor{keyword}{using }System.Linq;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00004}00004 \textcolor{keyword}{using }UnityEngine;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00005}00005 \textcolor{keyword}{using }UnityEngine.SceneManagement;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00007}\mbox{\hyperlink{classGenerator}{00007}} \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{classGenerator}{Generator}} : MonoBehaviour}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00008}00008 \{}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00009}00009     \textcolor{keyword}{public} \mbox{\hyperlink{classRoom}{Room}}[] RoomPrefabs;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00010}00010     \textcolor{keyword}{public} \mbox{\hyperlink{classRoom}{Room}} StartingRoom;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00011}00011     \textcolor{keyword}{public} \textcolor{keywordtype}{int} Width;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00012}00012     \textcolor{keyword}{public} \textcolor{keywordtype}{int} Height; }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00014}00014     \textcolor{keyword}{private} \mbox{\hyperlink{classRoom}{Room}}[,] spawnedRooms;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00015}00015     \textcolor{comment}{//IEnumerator}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00016}00016     \textcolor{keyword}{private} \textcolor{keywordtype}{void} Start()}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00017}00017     \{}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00018}00018         spawnedRooms = \textcolor{keyword}{new} \mbox{\hyperlink{classRoom}{Room}}[Width, Height];}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00019}00019         spawnedRooms[Width / 2, 0] = StartingRoom;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00020}00020         Debug.Log(\textcolor{stringliteral}{"{}"{}} +Width / 2 + \textcolor{stringliteral}{"{} "{}} + 0);}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00023}00023         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < Width * Height -\/ 1; i++)}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00024}00024         \{}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00025}00025             \textcolor{comment}{//yield return new WaitForSecondsRealtime(0.5f);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00026}00026             PlaceOneRoom();}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00027}00027         \}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00028}00028     \}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00030}00030     \textcolor{keyword}{private} \textcolor{keywordtype}{void} PlaceOneRoom()}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00031}00031     \{}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00032}00032         HashSet<Vector2Int> vacantPlaces = \textcolor{keyword}{new} HashSet<Vector2Int>();}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00033}00033         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < spawnedRooms.GetLength(0); x++)}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00034}00034         \{}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00035}00035             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < spawnedRooms.GetLength(1); y++)}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00036}00036             \{}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00037}00037                 \textcolor{keywordflow}{if} (spawnedRooms[x, y] == \textcolor{keyword}{null}) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00039}00039                 \textcolor{keywordtype}{int} maxX = spawnedRooms.GetLength(0) -\/ 1;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00040}00040                 \textcolor{keywordtype}{int} maxY = spawnedRooms.GetLength(1) -\/ 1;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00042}00042                 \textcolor{keywordflow}{if} (x > 0 \&\& spawnedRooms[x -\/ 1, y] == \textcolor{keyword}{null}) vacantPlaces.Add(\textcolor{keyword}{new} Vector2Int(x -\/ 1, y));}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00043}00043                 \textcolor{keywordflow}{if} (y > 0 \&\& spawnedRooms[x, y -\/ 1] == \textcolor{keyword}{null}) vacantPlaces.Add(\textcolor{keyword}{new} Vector2Int(x, y -\/ 1));}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00044}00044                 \textcolor{keywordflow}{if} (x < maxX \&\& spawnedRooms[x + 1, y] == \textcolor{keyword}{null}) vacantPlaces.Add(\textcolor{keyword}{new} Vector2Int(x + 1, y));}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00045}00045                 \textcolor{keywordflow}{if} (y < maxY \&\& spawnedRooms[x, y + 1] == \textcolor{keyword}{null}) vacantPlaces.Add(\textcolor{keyword}{new} Vector2Int(x, y + 1));}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00046}00046             \}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00047}00047         \}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00048}00048         \mbox{\hyperlink{classRoom}{Room}} newRoom = Instantiate(RoomPrefabs[Random.Range(0, RoomPrefabs.Length)]);}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00050}00050         Vector2Int position = vacantPlaces.ElementAt(Random.Range(0, vacantPlaces.Count));}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00051}00051         newRoom.transform.position = \textcolor{keyword}{new} Vector3(position.x +1, position.y+1, 0) * Random.Range(12, 20);}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00052}00052         spawnedRooms[position.x, position.y] = newRoom;}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00053}00053         Debug.Log(\textcolor{stringliteral}{"{}"{}}+ position.x+\textcolor{stringliteral}{"{} "{}} + position.y);}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00056}00056     \}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00058}00058     \textcolor{comment}{//private bool ConnectToSomething(Room room, Vector2Int p)}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00059}00059     \textcolor{comment}{//\{}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00060}00060     \textcolor{comment}{//    int maxX = spawnedRooms.GetLength(0) -\/ 1;}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00061}00061     \textcolor{comment}{//    int maxY = spawnedRooms.GetLength(1) -\/ 1;}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00062}00062 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00063}00063     \textcolor{comment}{//    List<Vector2Int> neighbours = new List<Vector2Int>();}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00065}00065     \textcolor{comment}{//    if (room.DoorU != null \&\& p.y < maxY \&\& spawnedRooms[p.x, p.y + 1]?.DoorD != null) neighbours.Add(Vector2Int.up);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00066}00066     \textcolor{comment}{//    if (room.DoorD != null \&\& p.y > 0 \&\& spawnedRooms[p.x, p.y -\/ 1]?.DoorU != null) neighbours.Add(Vector2Int.down);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00067}00067     \textcolor{comment}{//    if (room.DoorR != null \&\& p.x < maxX \&\& spawnedRooms[p.x + 1, p.y]?.DoorL != null) neighbours.Add(Vector2Int.right);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00068}00068     \textcolor{comment}{//    if (room.DoorL != null \&\& p.x > 0 \&\& spawnedRooms[p.x -\/ 1, p.y]?.DoorR != null) neighbours.Add(Vector2Int.left);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00069}00069 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00070}00070     \textcolor{comment}{//    if (neighbours.Count == 0) return false;}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00072}00072     \textcolor{comment}{//    Vector2Int selectedDirection = neighbours[Random.Range(0, neighbours.Count)];}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00073}00073     \textcolor{comment}{//    Room selectedRoom = spawnedRooms[p.x + selectedDirection.x, p.y + selectedDirection.y];}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00075}00075     \textcolor{comment}{//    if (selectedDirection == Vector2Int.up)}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00076}00076     \textcolor{comment}{//    \{}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00077}00077     \textcolor{comment}{//        room.DoorU.SetActive(false);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00078}00078     \textcolor{comment}{//        selectedRoom.DoorD.SetActive(false);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00079}00079     \textcolor{comment}{//    \}}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00080}00080     \textcolor{comment}{//    else if (selectedDirection == Vector2Int.down)}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00081}00081     \textcolor{comment}{//    \{}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00082}00082     \textcolor{comment}{//        room.DoorD.SetActive(false);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00083}00083     \textcolor{comment}{//        selectedRoom.DoorU.SetActive(false);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00084}00084     \textcolor{comment}{//    \}}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00085}00085     \textcolor{comment}{//    else if (selectedDirection == Vector2Int.right)}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00086}00086     \textcolor{comment}{//    \{}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00087}00087     \textcolor{comment}{//        room.DoorR.SetActive(false);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00088}00088     \textcolor{comment}{//        selectedRoom.DoorL.SetActive(false);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00089}00089     \textcolor{comment}{//    \}}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00090}00090     \textcolor{comment}{//    else if (selectedDirection == Vector2Int.left)}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00091}00091     \textcolor{comment}{//    \{}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00092}00092     \textcolor{comment}{//        room.DoorL.SetActive(false);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00093}00093     \textcolor{comment}{//        selectedRoom.DoorR.SetActive(false);}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00094}00094     \textcolor{comment}{//    \}}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00095}00095 }
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00096}00096     \textcolor{comment}{//    return true;}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00097}00097     \textcolor{comment}{//\}}}
\DoxyCodeLine{\Hypertarget{Generator_8cs_source_l00098}00098 \}}

\end{DoxyCode}
